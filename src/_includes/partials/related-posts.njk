{% set relatedPostsList = collections.allPosts | relatedPosts(page) %}

{%- if relatedPostsList.length > 0 -%}
  <section class="related-posts region region-space-m">
    <h2 class="text-step-2">Related Posts</h2>
    <ul class="related-posts-list" role="list" style="list-style: none; padding: 0;">
      {%- for post in relatedPostsList -%}
      <li class="related-post-item">
        <article>
          <h3 class="related-post-title">
            <a href="{{ post.url }}">{{ post.data.title }}</a>
          </h3>
          {% if post.data.description %}
          <p class="related-post-description">{{ post.data.description }}</p>
          {% endif %}
          <time class="related-post-date" datetime="{{ post.date | formatDate('yyyy-MM-dd') }}">
            {{ post.date | formatDate('MMM dd, yyyy') }}
          </time>
        </article>
      </li>
      {%- endfor -%}
    </ul>
  </section>
{%- endif -%}
